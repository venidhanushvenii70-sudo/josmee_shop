{% extends 'base.html' %}
{% load static %}

{% block title %}{{ product.name }} - Josmee{% endblock %}

{% block content %}

<style>
/* 768px-ஐ விட சிறிய திரைகளுக்கு (போன்கள்) இந்த விதிகளைப் பயன்படுத்து */
@media (max-width: 768px) {
    /* பிரதான கண்டெய்னர் (Main Container)-ஐ செங்குத்தாக (Vertically) மாற்றுகிறோம் */
    .product-detail-container {
        flex-direction: column;
        gap: 15px !important; /* இடைவெளியைக் குறைக்கிறோம் */
        padding: 10px !important; /* மொபைல் பேடிங் */
    }
    
    /* சிறிய படங்கள் (Thumbnails) */
    .thumbnail-col {
        width: 100% !important; 
        /* தேவைப்பட்டால், நீங்கள் இதை display: none; எனக் கொடுத்து மொபைலில் மறைக்கலாம் */
        flex-direction: row !important; /* சிறிய படங்களை வரிசையாகக் காட்டுகிறது */
        overflow-x: auto; /* ஸ்க்ரோல் செய்ய உதவுகிறது */
        justify-content: flex-start;
        height: auto;
    }

    /* பிரதான படம் (Main Image) */
    .main-image-col {
        width: 100% !important;
        max-width: 100% !important;
        /* போனில் படம் முழு அகலத்தையும் எடுத்துக்கொள்ளும் */
    }
    
    /* விவரங்கள் பகுதி (Details Column) */
    .details-col {
        width: 100% !important; 
        /* விவரங்கள் பகுதி முழு அகலத்தையும் எடுத்துக்கொள்ளும் */
        padding: 0 10px;
    }
}
</style>
<div class="product-detail-container" 
     style="max-width:1300px;margin:auto;padding:20px;display:flex;gap:30px;">

        <div class="thumbnail-col" 
         style="width:120px;display:flex;flex-direction:column;gap:10px;">
        {% for img in product.images.all %}
            <div style="min-width:100px; height:100px;border:1px solid #ddd;border-radius:10px;overflow:hidden;cursor:pointer;">
                <img src="{{ img.image.url }}" style="width:100%;height:100%;object-fit:cover;">
            </div>
        {% endfor %}
    </div>

        <div class="main-image-col" 
         style="flex:1;display:flex;justify-content:center;">
        <div style="width:100%;max-width:500px;border:1px solid #ddd;border-radius:20px;overflow:hidden;">
            {% if product.images.first %}
                <img src="{{ product.images.first.image.url }}" 
                     style="width:100%;object-fit:cover;">
            {% endif %}
        </div>
    </div>

        <div class="details-col" 
         style="width:350px;">
        
        <h2 style="font-size:24px;font-weight:700;color:#333;">
            {{ product.name }}
        </h2>

        <h3 style="font-size:28px;font-weight:700;color:#07057a;">
            ₹{{ product.price }}
        </h3>

        <div style="display:flex;align-items:center;gap:6px;margin:10px 0;">
            <span style="background:#def7de;padding:4px 10px;border-radius:6px;font-weight:600;">
                ⭐ {{ product.rating|default:4.5 }}
            </span>
            <span style="color:#666;">120 Reviews</span>
        </div>

        <div style="margin:10px 0;font-size:15px;color:#2b8f00;">
            ✔ Free Delivery
        </div>

        <div style="margin-top:20px;">
            <h4 style="font-weight:600;font-size:16px;margin-bottom:8px;">Select Size</h4>
            <button style="border:1px solid #080944d0;padding:10px 18px;border-radius:10px;font-size:14px;background:#faf5ff;">
                Free Size
            </button>
        </div>

        <div style="display:flex;gap:15px;margin-top:25px;">
            
            <a href="{% url 'cart:add_to_cart' product.id %}"
               style="flex:1;padding:14px;border:2px solid #12055e;border-radius:10px;font-size:16px;font-weight:600;background:white;color:#0e0c6d;text-align:center;text-decoration:none;">
                Add to Cart
            </a>

            <a href="{% url 'orders:checkout' %}"
               style="flex:1;padding:14px;border:none;border-radius:10px;font-size:16px;font-weight:600;background:#190685;color:white;text-align:center;text-decoration:none;">
                Buy Now
            </a>
        </div>

        <div style="margin-top:30px;">
            <h3 style="font-size:18px;font-weight:700;margin-bottom:10px;">Product Highlights</h3>

            <p><b>Category:</b> {{ product.category.name }}</p>
            <p><b>Description:</b> {{ product.description }}</p>
        </div>

    </div>
</div>

{% endblock %}